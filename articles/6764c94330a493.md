---
title: 'supabaseとFastAPI(バックエンド)'
emoji: '✨'
type: 'tech' # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

# 概要

# ORM とは

Object-Relational Mapping
データ設計を python で行うことができる オブジェクト指向言語でリレーションを記述できる

## sqlalchemy

Schema: DB 構造

```python
from sqlalchemy import Table, Column, Integer, String, MetaData, ForeignKey

# メタデータオブジェクトの作成
metadata = MetaData()

# テーブル定義の例
users = Table('users', metadata,
    Column('id', Integer, primary_key=True),
    Column('name', String(50)),
    Column('email', String(120), unique=True)
)
```

Types

```py
from sqlalchemy import (
    Integer,    # 整数
    String,     # 文字列
    Text,       # 長いテキスト
    Boolean,    # 真偽値
    DateTime,   # 日時
    Float,      # 浮動小数点
    Numeric,    # 精度の高い数値
    Date,       # 日付
    Time        # 時間
)
```

SQL Expression Language は、SQLAlchemy が提供する、Python コードを使って SQL クエリを構築するための言語/API

```py
from sqlalchemy import select, and_, or_, desc
from sqlalchemy.sql import text

# テーブル定義の例
users = Table('users', metadata,
    Column('id', Integer, primary_key=True),
    Column('name', String),
    Column('age', Integer)
)
```

alembic
